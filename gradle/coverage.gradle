jacocoTestReport {
	beforeEvaluate {
		classDirectories.from = files(classDirectories.files.collect {
			fileTree(dir: it, excludes: [
				"com/hedera/hashgraph/sdk/proto/**"
			])
		})
	}

	reports {
		xml.enabled false
		html.destination file("$buildDir/jacoco/jacocoTestCoverage")
	}
}

jacocoTestCoverageVerification {
	violationRules {
		rule {
			enabled = false

			element = "CLASS"
			excludes = ["com.hedera.hashgraph.sdk.proto.*"]

			limit {
				counter = "LINE"
				value = "COVEREDRATIO"
				minimum = 0.8
			}
		}
	}
}

// enforces code coverage validation on check
check.dependsOn jacocoTestCoverageVerification
