bintray {
	user = System.getenv("BINTRAY_USER")
	key = System.getenv("BINTRAY_KEY")
	publications = ["HederaSdkPublication"]
	override = true
	publish = true
	pkg {
		repo = "maven"
		name = "hedera-sdk"
		userOrg = "hashgraph"

		version {
			name = project.properties["version"]
		}
	}
}

publishing {
	publications {
		HederaSdkPublication(MavenPublication) {
			from components.java
			groupId "com.hedera.hashgraph"
			artifactId "sdk"
			version project.properties["version"]
		}
	}
}

// Add sources to the JAR
// This is a requirement for jcenter
jar {
	from sourceSets.main.allSource
}

release {
	failOnPublishNeeded = false
	tagTemplate = 'v$version'
	preTagCommitMessage = "[release] version: "
	tagCommitMessage = "[release] version: "
	newVersionCommitMessage = "[release] start next development iteration: "
}

afterReleaseBuild.dependsOn bintrayUpload
