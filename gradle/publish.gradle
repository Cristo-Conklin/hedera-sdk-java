bintray {
	user = System.getenv("BINTRAY_USER")
	key = System.getenv("BINTRAY_KEY")
	configurations = ['archives']
	override = true
	publish = true
	pkg {
		repo = "maven"
		name = "hedera-sdk"
		userOrg = "hashgraph"

		version {
			name = project.properties["version"]
		}
	}
}

// Add sources to the JAR
// This is a requirement for jcenter
task sourcesJar(type: Jar) {
	classifier = 'sources'
	from sourceSets.main.java.srcDirs
}

artifacts {
	archives sourcesJar
}

release {
	failOnPublishNeeded = false
	tagTemplate = 'v$version'
	preTagCommitMessage = "[release] version: "
	tagCommitMessage = "[release] version: "
	newVersionCommitMessage = "[release] start next development iteration: "
}

afterReleaseBuild.dependsOn bintrayUpload
